easyblock = 'PythonBundle'

name = 'archspec'
version = '0.1.0'

homepage = 'https://github.com/archspec/archspec'
description = "A library for detecting, labeling, and reasoning about microarchitectures"

toolchain = SYSTEM

allow_system_deps = [('Python', SYS_PYTHON_VERSION)]

download_dep_fail = True
use_pip = False

exts_default_options = {'source_urls': [PYPI_SOURCE]}

exts_list = [
    ('six', '1.14.0', {
        'checksums': ['236bdbdce46e6e6a3d61a337c0f8b763ca1e8717c03b369e87a7ec7ce1319c0a'],
    }),
    (name, version, {
        'checksums': ['a4431d0bbe9c9dd7b293c39d8e7590034d512ce5f5a1278a6cbdf61b33f7202d'],
    }),
]

local_pyshortver = '.'.join(SYS_PYTHON_VERSION.split('.')[:2])
sanity_check_paths = {
    'files': [],
    'dirs': ['lib/python%s/site-packages' % local_pyshortver],
}

sanity_check_commands = ["python -c 'from archspec.cpu import host; print(host())'"]

moduleclass = 'tools'
