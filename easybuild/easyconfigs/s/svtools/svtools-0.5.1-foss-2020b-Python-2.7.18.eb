easyblock = 'PythonBundle'

name = 'svtools'
version = '0.5.1'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://github.com/hall-lab/svtools'
description = """svtools is a suite of utilities designed to help bioinformaticians construct and explore cohort-level
structural variation calls."""

toolchain = {'name': 'foss', 'version': '2020b'}

dependencies = [
    ('Python', '2.7.18'),
    ('SciPy-bundle', '2020.11', versionsuffix),
    ('SVTyper', '0.7.1', versionsuffix),
]

use_pip = True

exts_list = [
    ('pandas', '0.19.2', {
        'checksums': ['6f0f4f598c2b16746803c8bafef7c721c57e4844da752d36240c0acf97658014'],
    }),
    ('crcmod', '1.7', {
        'checksums': ['dc7051a0db5f2bd48665a990d3ec1cc305a466a77358ca4492826f41f283601e'],
    }),
    ('cachetools', '3.1.1', {
        'checksums': ['8ea2d3ce97850f31e4a08b0e2b5e6c34997d7216a9d2c98e0f3978630d4da69a'],
    }),
    ('pyasn1-modules', '0.2.8', {
        'checksums': ['905f84c712230b2c592c19470d3ca8d552de726050d1d1716282a1f6146be65e'],
    }),
    ('rsa', '4.5', {
        'checksums': ['4d409f5a7d78530a4a2062574c7bd80311bc3af29b364e293aa9b03eea77714f'],
    }),
    ('google-auth', '1.29.0', {
        'checksums': ['010f011c4e27d3d5eb01106fba6aac39d164842dfcd8709955c4638f5b11ccf8'],
        'modulename': 'google.auth',
    }),
    ('protobuf', '3.15.8', {
        'checksums': ['0277f62b1e42210cafe79a71628c1d553348da81cbd553402a7f7549c50b11d0'],
        'modulename': 'google.protobuf',
    }),
    ('googleapis-common-protos', '1.51.0', {
        'checksums': ['013c91704279119150e44ef770086fdbba158c1f978a6402167d47d5409e226e'],
        'modulename': 'google.api',
    }),
    ('google-api-core', '1.26.3', {
        'checksums': ['b914345c7ea23861162693a27703bab804a55504f7e6e9abcaff174d80df32ac'],
        'modulename': 'google.api_core',
    }),
    ('google-cloud-core', '1.6.0', {
        'checksums': ['c6abb18527545379fc82efc4de75ce9a3772ccad2fc645adace593ba097cbb02'],
        'modulename': 'google.cloud.client',
    }),
    ('google-resumable-media', '1.2.0', {
        'checksums': ['ee98b1921e5bda94867a08c864e55b4763d63887664f49ee1c231988f56b9d43'],
        'modulename': 'google.resumable_media',
    }),
    ('google-cloud-storage', '1.37.1', {
        'checksums': ['e06a4797c87ac73c4a74801539fdf0a91761c3014281ff58b7b29f15b34c206e'],
        'modulename': 'google.cloud.storage',
    }),
    ('boto', '2.49.0', {
        'checksums': ['ea0d3b40a2d852767be77ca343b58a9e3a4b00d9db440efb8da74b4e58025e5a'],
    }),
    ('google-compute-engine', '2.8.13', {
        'checksums': ['358363a10169f890bac78cf9d7105132cdd2c1546fa8d9caa35c04a7cf7cfba7'],
        'modulename': 'google_compute_engine',
    }),
    ('logzero', '1.7.0', {
        'checksums': ['7f73ddd3ae393457236f081ffebd044a3aa2e423a47ae6ddb5179ab90d0ad082'],
    }),
    ('patsy', version, {
        'checksums': ['f115cec4201e1465cd58b9866b0b0e7b941caafec129869057405bfe5b5e3991'],
    }),
    ('statsmodels', '0.10.2', {
        'checksums': ['9cd2194c6642a8754e85f9a6e6912cdf996bebf6ff715d3cc67f65dadfd37cc9'],
    }),
    (name, version, {
        'checksums': ['ec25e5067879dc3bc12a0d41254f14cce969f7ab92c6ebc154148768e0072a52'],
    }),
]

# __init__.py files are missing, required with Python 2
postinstallcmds = [
    "touch %(installdir)s/lib/python%(pyshortver)s/site-packages/google/__init__.py",
    "touch %(installdir)s/lib/python%(pyshortver)s/site-packages/google/cloud/__init__.py",
]

sanity_check_paths = {
    'files': ['bin/svtools'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

sanity_check_commands = ["svtools --version"]

sanity_pip_check = True

moduleclass = 'bio'
